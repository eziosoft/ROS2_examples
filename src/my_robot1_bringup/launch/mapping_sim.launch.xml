<launch>
    <let name="urdf_path"
        value="$(find-pkg-share my_robot1_description)/urdf/my_robot1.urdf" />

    <let name="rviz_config_path"
        value="$(find-pkg-share my_robot1_description)/rviz/rviz.rviz" />

    <let name="cartographer_config_dir"
        value="$(find-pkg-share my_robot1_bringup)/config" />

    <let name="cartographer_config_basename"
        value="slam_2d.lua" />


    <node pkg="robot_state_publisher" exec="robot_state_publisher">
        <param name="robot_description"
            value="$(command 'xacro $(var urdf_path)')" />
    </node>

    <node pkg="my_robot1" exec="lidar_emulator" name="lidar_emulator_node" output="screen" />
    <node pkg="my_robot1" exec="lidar_driver" name="lidar_driver_node" output="screen"
        args="--ros-args -p ip:=127.0.0.1 -p port:=2323" />
    <node pkg="my_robot1" exec="drive_node" name="drive_node" output="screen" />
    <node pkg="cartographer_ros" exec="cartographer_node" name="cartographer_node" output="screen"
        args="-configuration_directory $(var cartographer_config_dir) -configuration_basename $(var cartographer_config_basename)" />

    <node pkg="cartographer_ros" exec="cartographer_occupancy_grid_node"
        name="cartographer_occupancy_grid_node" output="screen" />

</launch>